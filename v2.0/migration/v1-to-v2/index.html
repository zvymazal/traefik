



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Traefik Documentation">
      
      
      
        <meta name="author" content="containo.us">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/img/traefik.icon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Traefik v1 to v2 - Traefik</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../assets/styles/extra.css">
    
      <link rel="stylesheet" href="../../assets/styles/atom-one-light.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-51880359-3", "docs.traefik.io")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="cyan">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#migration-guide-from-v1-to-v2" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Traefik" class="md-header-nav__button md-logo">
          
            <img src="../../assets/img/traefik.logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Traefik
            </span>
            <span class="md-header-nav__topic">
              
                Traefik v1 to v2
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/containous/traefik/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Traefik" class="md-nav__button md-logo">
      
        <img src="../../assets/img/traefik.logo.png" width="48" height="48">
      
    </a>
    Traefik
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/containous/traefik/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/configuration-overview/" title="Configuration Introduction" class="md-nav__link">
      Configuration Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/install-traefik/" title="Install Traefik" class="md-nav__link">
      Install Traefik
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Configuration Discovery
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Configuration Discovery
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../providers/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../providers/docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../providers/kubernetes-crd/" title="Kubernetes IngressRoute" class="md-nav__link">
      Kubernetes IngressRoute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../providers/kubernetes-ingress/" title="Kubernetes Ingress" class="md-nav__link">
      Kubernetes Ingress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../providers/rancher/" title="Rancher" class="md-nav__link">
      Rancher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../providers/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../providers/marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Routing & Load Balancing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Routing & Load Balancing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/entrypoints/" title="EntryPoints" class="md-nav__link">
      EntryPoints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/routers/" title="Routers" class="md-nav__link">
      Routers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/services/" title="Services" class="md-nav__link">
      Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Providers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Providers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/providers/docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/providers/kubernetes-crd/" title="Kubernetes IngressRoute" class="md-nav__link">
      Kubernetes IngressRoute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/providers/rancher/" title="Rancher" class="md-nav__link">
      Rancher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/providers/marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      HTTPS & TLS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        HTTPS & TLS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../https/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../https/tls/" title="TLS" class="md-nav__link">
      TLS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../https/acme/" title="Let's Encrypt" class="md-nav__link">
      Let's Encrypt
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Middlewares
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Middlewares
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/addprefix/" title="AddPrefix" class="md-nav__link">
      AddPrefix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/basicauth/" title="BasicAuth" class="md-nav__link">
      BasicAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/buffering/" title="Buffering" class="md-nav__link">
      Buffering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/chain/" title="Chain" class="md-nav__link">
      Chain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/circuitbreaker/" title="CircuitBreaker" class="md-nav__link">
      CircuitBreaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/compress/" title="Compress" class="md-nav__link">
      Compress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/digestauth/" title="DigestAuth" class="md-nav__link">
      DigestAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/errorpages/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/forwardauth/" title="ForwardAuth" class="md-nav__link">
      ForwardAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/headers/" title="Headers" class="md-nav__link">
      Headers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/ipwhitelist/" title="IpWhitelist" class="md-nav__link">
      IpWhitelist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/inflightreq/" title="InFlightReq" class="md-nav__link">
      InFlightReq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/passtlsclientcert/" title="PassTLSClientCert" class="md-nav__link">
      PassTLSClientCert
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/ratelimit/" title="RateLimit" class="md-nav__link">
      RateLimit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/redirectregex/" title="RedirectRegex" class="md-nav__link">
      RedirectRegex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/redirectscheme/" title="RedirectScheme" class="md-nav__link">
      RedirectScheme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/replacepath/" title="ReplacePath" class="md-nav__link">
      ReplacePath
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/replacepathregex/" title="ReplacePathRegex" class="md-nav__link">
      ReplacePathRegex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/retry/" title="Retry" class="md-nav__link">
      Retry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/stripprefix/" title="StripPrefix" class="md-nav__link">
      StripPrefix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middlewares/stripprefixregex/" title="StripPrefixRegex" class="md-nav__link">
      StripPrefixRegex
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Operations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/dashboard/" title="Dashboard" class="md-nav__link">
      Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/ping/" title="Ping" class="md-nav__link">
      Ping
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Observability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Observability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/logs/" title="Logs" class="md-nav__link">
      Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/access-logs/" title="Access Logs" class="md-nav__link">
      Access Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3" type="checkbox" id="nav-8-3">
    
    <label class="md-nav__link" for="nav-8-3">
      Metrics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-3">
        Metrics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/metrics/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/metrics/datadog/" title="Datadog" class="md-nav__link">
      Datadog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/metrics/influxdb/" title="InfluxDB" class="md-nav__link">
      InfluxDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/metrics/prometheus/" title="Prometheus" class="md-nav__link">
      Prometheus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/metrics/statsd/" title="StatsD" class="md-nav__link">
      StatsD
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" type="checkbox" id="nav-8-4">
    
    <label class="md-nav__link" for="nav-8-4">
      Tracing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-4">
        Tracing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/tracing/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/tracing/jaeger/" title="Jaeger" class="md-nav__link">
      Jaeger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/tracing/zipkin/" title="Zipkin" class="md-nav__link">
      Zipkin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/tracing/datadog/" title="Datadog" class="md-nav__link">
      Datadog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/tracing/instana/" title="Instana" class="md-nav__link">
      Instana
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../observability/tracing/haystack/" title="Haystack" class="md-nav__link">
      Haystack
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      User Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        User Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guides/crd-acme/" title="Kubernetes and Let's Encrypt" class="md-nav__link">
      Kubernetes and Let's Encrypt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guides/grpc/" title="gRPC Examples" class="md-nav__link">
      gRPC Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guides/marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-4" type="checkbox" id="nav-9-4">
    
    <label class="md-nav__link" for="nav-9-4">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-4">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guides/docker-compose/basic-example/" title="Basic Example" class="md-nav__link">
      Basic Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-4-2" type="checkbox" id="nav-9-4-2">
    
    <label class="md-nav__link" for="nav-9-4-2">
      HTTPS with Let's Encrypt
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-9-4-2">
        HTTPS with Let's Encrypt
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guides/docker-compose/acme-tls/" title="TLS Challenge" class="md-nav__link">
      TLS Challenge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guides/docker-compose/acme-http/" title="HTTP Challenge" class="md-nav__link">
      HTTP Challenge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guides/docker-compose/acme-dns/" title="DNS Challenge" class="md-nav__link">
      DNS Challenge
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10" checked>
    
    <label class="md-nav__link" for="nav-10">
      Migration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Migration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Traefik v1 to v2
      </label>
    
    <a href="./" title="Traefik v1 to v2" class="md-nav__link md-nav__link--active">
      Traefik v1 to v2
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frontends-and-backends-are-dead-long-live-routers-middlewares-and-services" class="md-nav__link">
    Frontends and Backends Are Dead... ... Long Live Routers, Middlewares, and Services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tls-configuration-is-now-dynamic-per-router" class="md-nav__link">
    TLS Configuration Is Now Dynamic, per Router.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-to-https-redirection-is-now-configured-on-routers" class="md-nav__link">
    HTTP to HTTPS Redirection Is Now Configured on Routers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strip-and-rewrite-path-prefixes" class="md-nav__link">
    Strip and Rewrite Path Prefixes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acme-letsencrypt" class="md-nav__link">
    ACME (LetsEncrypt)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traefik-logs" class="md-nav__link">
    Traefik Logs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracing" class="md-nav__link">
    Tracing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#no-more-root-level-keyvalues" class="md-nav__link">
    No More Root Level Key/Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dashboard" class="md-nav__link">
    Dashboard
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providers" class="md-nav__link">
    Providers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-tips-you-should-know" class="md-nav__link">
    Some Tips You Should Know
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/thank-you/" title="Thank You!" class="md-nav__link">
      Thank You!
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/submitting-issues/" title="Submitting Issues" class="md-nav__link">
      Submitting Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/submitting-pull-requests/" title="Submitting PRs" class="md-nav__link">
      Submitting PRs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/submitting-security-issues/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/building-testing/" title="Building and Testing" class="md-nav__link">
      Building and Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/documentation/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/data-collection/" title="Data Collection" class="md-nav__link">
      Data Collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/advocating/" title="Advocating" class="md-nav__link">
      Advocating
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/maintainers/" title="Maintainers" class="md-nav__link">
      Maintainers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      References
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-1" type="checkbox" id="nav-12-1">
    
    <label class="md-nav__link" for="nav-12-1">
      Static Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-1">
        Static Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/static-configuration/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/static-configuration/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/static-configuration/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/static-configuration/env/" title="Environment variables" class="md-nav__link">
      Environment variables
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-2" type="checkbox" id="nav-12-2">
    
    <label class="md-nav__link" for="nav-12-2">
      Dynamic Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-2">
        Dynamic Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/dynamic-configuration/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/dynamic-configuration/docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/dynamic-configuration/kubernetes-crd/" title="Kubernetes CRD" class="md-nav__link">
      Kubernetes CRD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/dynamic-configuration/marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/dynamic-configuration/rancher/" title="Rancher" class="md-nav__link">
      Rancher
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frontends-and-backends-are-dead-long-live-routers-middlewares-and-services" class="md-nav__link">
    Frontends and Backends Are Dead... ... Long Live Routers, Middlewares, and Services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tls-configuration-is-now-dynamic-per-router" class="md-nav__link">
    TLS Configuration Is Now Dynamic, per Router.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-to-https-redirection-is-now-configured-on-routers" class="md-nav__link">
    HTTP to HTTPS Redirection Is Now Configured on Routers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strip-and-rewrite-path-prefixes" class="md-nav__link">
    Strip and Rewrite Path Prefixes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acme-letsencrypt" class="md-nav__link">
    ACME (LetsEncrypt)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traefik-logs" class="md-nav__link">
    Traefik Logs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracing" class="md-nav__link">
    Tracing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#no-more-root-level-keyvalues" class="md-nav__link">
    No More Root Level Key/Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dashboard" class="md-nav__link">
    Dashboard
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providers" class="md-nav__link">
    Providers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-tips-you-should-know" class="md-nav__link">
    Some Tips You Should Know
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/containous/traefik/edit/v2.0/docs/content/migration/v1-to-v2.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="migration-guide-from-v1-to-v2">Migration Guide: From v1 to v2<a class="headerlink" href="#migration-guide-from-v1-to-v2" title="Permanent link">&para;</a></h1>
<p class="subtitle">How to Migrate from Traefik v1 to Traefik v2.</p>
<p>The version 2 of Traefik introduces a number of breaking changes,
which require one to update their configuration when they migrate from v1 to v2.
The goal of this page is to recapitulate all of these changes, and in particular to give examples,
feature by feature, of how the configuration looked like in v1, and how it now looks like in v2.</p>
<div class="admonition info">
<p class="admonition-title">Migration Helper</p>
<p>We created a tool to help during the migration: <a href="https://github.com/containous/traefik-migration-tool">traefik-migration-tool</a></p>
<p>This tool allows to:</p>
<ul>
<li>convert <code>Ingress</code> to Traefik <code>IngressRoute</code> resources.</li>
<li>convert <code>acme.json</code> file from v1 to v2 format.</li>
<li>migrate the static configuration contained in the file <code>traefik.toml</code> to a Traefik v2 file.</li>
</ul>
</div>
<h2 id="frontends-and-backends-are-dead-long-live-routers-middlewares-and-services">Frontends and Backends Are Dead... <br/>... Long Live Routers, Middlewares, and Services<a class="headerlink" href="#frontends-and-backends-are-dead-long-live-routers-middlewares-and-services" title="Permanent link">&para;</a></h2>
<p>During the transition from v1 to v2, a number of internal pieces and components of Traefik were rewritten and reorganized.
As such, the combination of core notions such as frontends and backends has been replaced with the combination of <a href="../../routing/routers/">routers</a>, <a href="../../routing/services/">services</a>, and <a href="../../middlewares/overview/">middlewares</a>.</p>
<p>Typically, a router replaces a frontend, and a service assumes the role of a backend, with each router referring to a service.
However, even though a backend was in charge of applying any desired modification on the fly to the incoming request,
the router defers that responsibility to another component.
Instead, a dedicated middleware is now defined for each kind of such modification.
Then any router can refer to an instance of the wanted middleware.</p>
<div class="admonition example">
<p class="admonition-title">One frontend with basic auth and one backend, become one router, one service, and one basic auth middleware.</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Docker</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">labels:
  - "traefik.frontend.rule=Host:test.localhost;PathPrefix:/test"
  - "traefik.frontend.auth.basic.users=test:$$apr1$$H6uskkkW$$IgXLP6ewTrSuBkTrqE8wj/,test2:$$apr1$$d9hr9HBB$$4HxwgUir3HP4EsggP/QNo0"</code></pre></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">K8s Ingress</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: traefik
  namespace: kube-system
  annotations:
    kubernetes.io/ingress.class: traefik
    traefik.ingress.kubernetes.io/rule-type: PathPrefix
spec:
  rules:
  - host: test.locahost
    http:
      paths:
      - path: /test
        backend:
          serviceName: server0
          servicePort: 80
      - path: /test
        backend:
          serviceName: server1
          servicePort: 80</code></pre></div>
<input name="__tabs_1" type="radio" id="__tab_1_2" />
<label for="__tab_1_2">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml">[frontends]
  [frontends.frontend1]
    entryPoints = ["http"]
    backend = "backend1"

    [frontends.frontend1.routes]
      [frontends.frontend1.routes.route0]
        rule = "Host:test.localhost"
      [frontends.frontend1.routes.route0]
        rule = "PathPrefix:/test"

    [frontends.frontend1.auth]
      [frontends.frontend1.auth.basic]
        users = [
          "test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/",
          "test2:$apr1$d9hr9HBB$4HxwgUir3HP4EsggP/QNo0",
        ]

[backends]
  [backends.backend1]
    [backends.backend1.servers.server0]
      url = "http://10.10.10.1:80"
    [backends.backend1.servers.server1]
      url = "http://10.10.10.2:80"

    [backends.backend1.loadBalancer]
      method = "wrr"</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_2" type="radio" id="__tab_2_0" checked="checked" />
<label for="__tab_2_0">Docker</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">labels:
  - "traefik.http.routers.router0.rule=Host(`bar.com`) &amp;&amp; PathPrefix(`/test`)"
  - "traefik.http.routers.router0.middlewares=auth"
  - "traefik.http.middlewares.auth.basicauth.users=test:$$apr1$$H6uskkkW$$IgXLP6ewTrSuBkTrqE8wj/,test2:$$apr1$$d9hr9HBB$$4HxwgUir3HP4EsggP/QNo0"</code></pre></div>
<input name="__tabs_2" type="radio" id="__tab_2_1" />
<label for="__tab_2_1">K8s IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># The definitions below require the definitions for the Middleware and IngressRoute kinds.
# https://docs.traefik.io/v2.0/providers/kubernetes-crd/#traefik-ingressroute-definition
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: basicauth
  namespace: foo

spec:
  basicAuth:
    users:
      - test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/
      - test2:$apr1$d9hr9HBB$4HxwgUir3HP4EsggP/QNo0

---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: ingressroutebar

spec:
  entryPoints:
    - http
  routes:
  - match: Host(`test.localhost`) &amp;&amp; PathPrefix(`/test`)
    kind: Rule
    services:
    - name: server0
      port: 80
    - name: server1
      port: 80
    middlewares:
    - name: basicauth
      namespace: foo</code></pre></div>
<input name="__tabs_2" type="radio" id="__tab_2_2" />
<label for="__tab_2_2">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml">[http.routers]
  [http.routers.router0]
    rule = "Host(`test.localhost`) &amp;&amp; PathPrefix(`/test`)"
    middlewares = ["auth"]
    service = "my-service"

[http.services]
  [[http.services.my-service.loadBalancer.servers]]
    url = "http://10.10.10.1:80"
  [[http.services.my-service.loadBalancer.servers]]
    url = "http://10.10.10.2:80"

[http.middlewares]
  [http.middlewares.auth.basicAuth]
    users = [
      "test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/",
      "test2:$apr1$d9hr9HBB$4HxwgUir3HP4EsggP/QNo0",
    ]</code></pre></div>
<input name="__tabs_2" type="radio" id="__tab_2_3" />
<label for="__tab_2_3">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">http:
  routers:
    router0:
      rule: "Host(`test.localhost`) &amp;&amp; PathPrefix(`/test`)"
      service: my-service
      middlewares:
        - auth

  services:
    my-service:
      loadBalancer:
        servers:
          - url: http://10.10.10.1:80
          - url: http://10.10.10.2:80

  middlewares:
    auth:
      basicAuth:
        users:
          - "test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/"
          - "test2:$apr1$d9hr9HBB$4HxwgUir3HP4EsggP/QNo0"</code></pre></div>
</div>
</div>
<h2 id="tls-configuration-is-now-dynamic-per-router">TLS Configuration Is Now Dynamic, per Router.<a class="headerlink" href="#tls-configuration-is-now-dynamic-per-router" title="Permanent link">&para;</a></h2>
<p>TLS parameters used to be specified in the static configuration, as an entryPoint field.
With Traefik v2, a new dynamic TLS section at the root contains all the desired TLS configurations.
Then, a <a href="../../routing/routers/#tls">router's TLS field</a> can refer to one of the <a href="../../https/tls/">TLS configurations</a> defined at the root, hence defining the <a href="../../https/tls/">TLS configuration</a> for that router.</p>
<div class="admonition example">
<p class="admonition-title">TLS on web-secure entryPoint becomes TLS option on Router-1</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_3" type="radio" id="__tab_3_0" checked="checked" />
<label for="__tab_3_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[entryPoints]
  [entryPoints.web-secure]
    address = ":443"

    [entryPoints.web-secure.tls]
      minVersion = "VersionTLS12"
      cipherSuites = [
        "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
        "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
        "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305",
        "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305",
        "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
        "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
       ]
      [[entryPoints.web-secure.tls.certificates]]
        certFile = "path/to/my.cert"
        keyFile = "path/to/my.key"</code></pre></div>
<input name="__tabs_3" type="radio" id="__tab_3_1" />
<label for="__tab_3_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--entryPoints='Name:web-secure Address::443 TLS:path/to/my.cert,path/to/my.key TLS.MinVersion:VersionTLS12 TLS.CipherSuites:TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256'</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_4" type="radio" id="__tab_4_0" checked="checked" />
<label for="__tab_4_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># dynamic configuration
[http.routers]
  [http.routers.Router-1]
    rule = "Host(`bar.com`)"
    service = "service-id"
    # will terminate the TLS request
    [http.routers.Router-1.tls]
      options = "myTLSOptions"

[[tls.certificates]]
  certFile = "/path/to/domain.cert"
  keyFile = "/path/to/domain.key"

[tls.options]
  [tls.options.default]
    minVersion = "VersionTLS12"

  [tls.options.myTLSOptions]
    minVersion = "VersionTLS13"
    cipherSuites = [
        "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
        "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
        "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305",
        "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305",
        "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
        "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
        ]</code></pre></div>
<input name="__tabs_4" type="radio" id="__tab_4_1" />
<label for="__tab_4_1">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">http:
  routers:
    Router-1:
      rule: "Host(`bar.com`)"
      service: service-id
      # will terminate the TLS request
      tls:
        options: myTLSOptions

tls:
  certificates:
    - certFile: /path/to/domain.cert
      keyFile: /path/to/domain.key
  options:
    myTLSOptions:
      minVersion: VersionTLS13
      cipherSuites:
        - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305
        - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305
        - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
        - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code></pre></div>
<input name="__tabs_4" type="radio" id="__tab_4_2" />
<label for="__tab_4_2">K8s IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># The definitions below require the definitions for the TLSOption and IngressRoute kinds.
# https://docs.traefik.io/v2.0/providers/kubernetes-crd/#traefik-ingressroute-definition
apiVersion: traefik.containo.us/v1alpha1
kind: TLSOption
metadata:
  name: mytlsoption
  namespace: default

spec:
  minVersion: VersionTLS13
  cipherSuites:
    - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
    - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305
    - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305
    - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
    - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256

---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: ingressroutebar

spec:
  entryPoints:
    - web
  routes:
    - match: Host(`bar.com`)
      kind: Rule
      services:
        - name: whoami
          port: 80
  tls:
    options:
      name: mytlsoption
      namespace: default</code></pre></div>
<input name="__tabs_4" type="radio" id="__tab_4_3" />
<label for="__tab_4_3">Docker</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">labels:
  # myTLSOptions must be defined by another provider, in this instance in the File Provider.
  # see the cross provider section
  - "traefik.http.routers.router0.tls.options=myTLSOptions@file"</code></pre></div>
</div>
</div>
<h2 id="http-to-https-redirection-is-now-configured-on-routers">HTTP to HTTPS Redirection Is Now Configured on Routers<a class="headerlink" href="#http-to-https-redirection-is-now-configured-on-routers" title="Permanent link">&para;</a></h2>
<p>Previously on Traefik v1, the redirection was applied on an entry point or on a frontend.
With Traefik v2 it is applied on a <a href="../../routing/routers/">Router</a>. </p>
<p>To apply a redirection, one of the redirect middlewares, <a href="../../middlewares/redirectregex/">RedirectRegex</a> or <a href="../../middlewares/redirectscheme/">RedirectScheme</a>, has to be configured and added to the router middlewares list.</p>
<div class="admonition example">
<p class="admonition-title">HTTP to HTTPS redirection</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_5" type="radio" id="__tab_5_0" checked="checked" />
<label for="__tab_5_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
defaultEntryPoints = ["http", "https"]

[entryPoints]
  [entryPoints.http]
    address = ":80"
    [entryPoints.http.redirect]
      entryPoint = "https"

  [entryPoints.https]
    address = ":443"
    [entryPoints.https.tls]
      [[entryPoints.https.tls.certificates]]
        certFile = "examples/traefik.crt"
        keyFile = "examples/traefik.key"</code></pre></div>
<input name="__tabs_5" type="radio" id="__tab_5_1" />
<label for="__tab_5_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--entrypoints=Name:web Address::80 Redirect.EntryPoint:web-secure
--entryPoints='Name:web-secure Address::443 TLS:path/to/my.cert,path/to/my.key'</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_6" type="radio" id="__tab_6_0" checked="checked" />
<label for="__tab_6_0">Docker</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">labels:
- traefik.http.routers.web.rule=Host(`foo.com`)
- traefik.http.routers.web.entrypoints=web
- traefik.http.routers.web.middlewares=redirect@file
- traefik.http.routers.web-secured.rule=Host(`foo.com`)
- traefik.http.routers.web-secured.entrypoints=web-secure
- traefik.http.routers.web-secured.tls=true</code></pre></div>
<input name="__tabs_6" type="radio" id="__tab_6_1" />
<label for="__tab_6_1">K8s IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: http-redirect-ingressRoute

spec:
  entryPoints:
    - web
  routes:
    - match: Host(`foo.com`)
      kind: Rule
      services:
        - name: whoami
          port: 80
      middlewares:
        - name: redirect

---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: https-ingressRoute

spec:
  entryPoints:
    - web-secure
  routes:
    - match: Host(`foo`)
      kind: Rule
      services:
        - name: whoami
          port: 80
  tls: {}

---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: redirect
spec:
  redirectScheme:
    scheme: https
</code></pre></div>
<input name="__tabs_6" type="radio" id="__tab_6_2" />
<label for="__tab_6_2">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml">## static configuration
# traefik.toml

[entryPoints.web]
  address = ":80"

[entryPoints.web-secure]
  address = ":443"

##---------------------##

## dynamic configuration
# dynamic-conf.toml

[http.routers]
  [http.routers.router0]
    rule = "Host(`foo.com`)"
    service = "my-service"
    entrypoints = ["web"]
    middlewares = ["redirect"]

[http.routers.router1]
    rule = "Host(`foo.com`)"
    service = "my-service"
    entrypoints = ["web-secure"]
    [http.routers.router1.tls]

[http.services]
  [[http.services.my-service.loadBalancer.servers]]
    url = "http://10.10.10.1:80"
  [[http.services.my-service.loadBalancer.servers]]
    url = "http://10.10.10.2:80"

[http.middlewares]
  [http.middlewares.redirect.redirectScheme]
    scheme = "https"

[[tls.certificates]]
  certFile = "/path/to/domain.cert"
  keyFile = "/path/to/domain.key"</code></pre></div>
<input name="__tabs_6" type="radio" id="__tab_6_3" />
<label for="__tab_6_3">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">## static configuration
# traefik.yml

entryPoints:
  web:
    address: ":80"

  web-secure:
    address: ":443"

##---------------------##

## dynamic configuration
# dynamic-conf.yml

http:
  routers:
    router0:
      rule: "Host(`foo.com`)"
      entryPoints:
        - web
      middlewares:
        - redirect
      service: my-service

    router1:
      rule: "Host(`foo.com`)"
      entryPoints:
        - web-secure
      service: my-service
      tls: {}

  services:
    my-service:
      loadBalancer:
        servers:
          - url: http://10.10.10.1:80
          - url: http://10.10.10.2:80

  middlewares:
    redirect:
      redirectScheme:
        scheme: https

tls:
  certificates:
    - certFile: /app/certs/server/server.pem
      keyFile: /app/certs/server/server.pem</code></pre></div>
</div>
</div>
<h2 id="strip-and-rewrite-path-prefixes">Strip and Rewrite Path Prefixes<a class="headerlink" href="#strip-and-rewrite-path-prefixes" title="Permanent link">&para;</a></h2>
<p>With the new core notions of v2 (introduced earlier in the section
<a href="#frontends-and-backends-are-dead-long-live-routers-middlewares-and-services">"Frontends and Backends Are Dead... Long Live Routers, Middlewares, and Services"</a>),
transforming the URL path prefix of incoming requests is configured with <a href="../../middlewares/overview/">middlewares</a>,
after the routing step with <a href="https://docs.traefik.io/v2.0/routing/routers/#rule">router rule <code>PathPrefix</code></a>.</p>
<p>Use Case: Incoming requests to <code>http://company.org/admin</code> are forwarded to the webapplication "admin",
with the path <code>/admin</code> stripped, e.g. to <code>http://&lt;IP&gt;:&lt;port&gt;/</code>. In this case, you must:</p>
<ul>
<li>First, configure a router named <code>admin</code> with a rule matching at least the path prefix with the <code>PathPrefix</code> keyword,</li>
<li>Then, define a middleware of type <a href="../../middlewares/stripprefix/"><code>stripprefix</code></a>, which remove the prefix <code>/admin</code>, associated to the router <code>admin</code>.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Strip Path Prefix When Forwarding to Backend</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_7" type="radio" id="__tab_7_0" checked="checked" />
<label for="__tab_7_0">Docker</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">labels:
  - "traefik.frontend.rule=Host:company.org;PathPrefixStrip:/admin"</code></pre></div>
<input name="__tabs_7" type="radio" id="__tab_7_1" />
<label for="__tab_7_1">Kubernetes Ingress</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  name: traefik
  annotations:
    kubernetes.io/ingress.class: traefik
    traefik.ingress.kubernetes.io/rule-type: PathPrefixStrip
spec:
  rules:
  - host: company.org
    http:
      paths:
      - path: /admin
        backend:
          serviceName: admin-svc
          servicePort: admin</code></pre></div>
<input name="__tabs_7" type="radio" id="__tab_7_2" />
<label for="__tab_7_2">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml">[frontends.admin]
  [frontends.admin.routes.admin_1]
  rule = "Host:company.org;PathPrefixStrip:/admin"</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_8" type="radio" id="__tab_8_0" checked="checked" />
<label for="__tab_8_0">Docker</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">labels:
  - "traefik.http.routers.admin.rule=Host(`company.org`) &amp;&amp; PathPrefix(`/admin`)"
  - "traefik.http.routers.admin.middlewares=admin-stripprefix"
  - "traefik.http.middlewares.admin-stripprefix.stripprefix.prefixes=/admin"</code></pre></div>
<input name="__tabs_8" type="radio" id="__tab_8_1" />
<label for="__tab_8_1">Kubernetes IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: http-redirect-ingressRoute
  namespace: admin-web
spec:
  entryPoints:
    - web
  routes:
    - match: Host(`company.org`) &amp;&amp; PathPrefix(`/admin`)
      kind: Rule
      services:
        - name: admin-svc
          port: admin
      middlewares:
        - name: admin-stripprefix
---
kind: Middleware
metadata:
  name: admin-stripprefix
spec:
  stripPrefix:
    prefixes:
      - /admin</code></pre></div>
<input name="__tabs_8" type="radio" id="__tab_8_2" />
<label for="__tab_8_2">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml">## Dynamic configuration
# dynamic-conf.toml

[http.routers.router1]
    rule = "Host(`company.org`) &amp;&amp; PathPrefix(`/admin`)"
    service = "admin-svc"
    entrypoints = ["web"]
    middlewares = ["admin-stripprefix"]

[http.middlewares]
  [http.middlewares.admin-stripprefix.stripPrefix]
  prefixes = ["/admin"]

# ...</code></pre></div>
<input name="__tabs_8" type="radio" id="__tab_8_3" />
<label for="__tab_8_3">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">## Dynamic Configuration
# dynamic-conf.yml

# As YAML Configuration File
http:
  routers:
    admin:
      service: admin-svc
      middlewares:
        - "admin-stripprefix"
      rule: "Host(`company.org`) &amp;&amp; PathPrefix(`/admin`)"

  middlewares:
    admin-stripprefix:
      stripPrefix:
        prefixes: 
        - "/admin"

# ...</code></pre></div>
</div>
</div>
<details class="question"><summary>What About Other Path Transformations?</summary><p>Instead of removing the path prefix with the <a href="../../middlewares/stripprefix/"><code>stripprefix</code> middleware</a>, you can also:</p>
<ul>
<li>Add a path prefix with the <a href="../../middlewares/addprefix/"><code>addprefix</code> middleware</a></li>
<li>Replace the complete path of the request with the <a href="../../middlewares/replacepath/"><code>replacepath</code> middleware</a></li>
<li>ReplaceRewrite path using Regexp with the <a href="../../middlewares/replacepathregex/"><code>replacepathregex</code> middleware</a></li>
<li>And a lot more on the <a href="../../middlewares/overview/"><code>middlewares</code> page</a></li>
</ul>
</details>
<h2 id="acme-letsencrypt">ACME (LetsEncrypt)<a class="headerlink" href="#acme-letsencrypt" title="Permanent link">&para;</a></h2>
<p><a href="../../https/acme/">ACME</a> is now a certificate resolver (under a certificatesResolvers section) but remains in the static configuration.</p>
<div class="admonition example">
<p class="admonition-title">ACME from provider to a specific Certificate Resolver</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_9" type="radio" id="__tab_9_0" checked="checked" />
<label for="__tab_9_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
defaultEntryPoints = ["web-secure","web"]

[entryPoints.web]
address = ":80"
  [entryPoints.web.redirect]
  entryPoint = "webs"
[entryPoints.web-secure]
  address = ":443"
  [entryPoints.https.tls]

[acme]
  email = "your-email-here@my-awesome-app.org"
  storage = "acme.json"
  entryPoint = "web-secure"
  onHostRule = true
  [acme.httpChallenge]
    entryPoint = "web"</code></pre></div>
<input name="__tabs_9" type="radio" id="__tab_9_1" />
<label for="__tab_9_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--defaultentrypoints=web-secure,web
--entryPoints=Name:web Address::80 Redirect.EntryPoint:web-secure
--entryPoints=Name:web-secure Address::443 TLS
--acme.email=your-email-here@my-awesome-app.org
--acme.storage=acme.json
--acme.entryPoint=web-secure
--acme.onHostRule=true
--acme.httpchallenge.entrypoint=http</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_10" type="radio" id="__tab_10_0" checked="checked" />
<label for="__tab_10_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[entryPoints]
  [entryPoints.web]
    address = ":80"

  [entryPoints.web-secure]
    address = ":443"

[certificatesResolvers.sample.acme]
  email = "your-email@your-domain.org"
  storage = "acme.json"
  [certificatesResolvers.sample.acme.httpChallenge]
    # used during the challenge
    entryPoint = "web"</code></pre></div>
<input name="__tabs_10" type="radio" id="__tab_10_1" />
<label for="__tab_10_1">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">entryPoints:
  web:
    address: ":80"

  web-secure:
    address: ":443"

certificatesResolvers:
  sample:
    acme:
      email: your-email@your-domain.org
      storage: acme.json
      httpChallenge:
        # used during the challenge
        entryPoint: web</code></pre></div>
<input name="__tabs_10" type="radio" id="__tab_10_2" />
<label for="__tab_10_2">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--entryPoints.web.address=:80
--entryPoints.websecure.address=:443
--certificatesResolvers.sample.acme.email=your-email@your-domain.org
--certificatesResolvers.sample.acme.storage=acme.json
--certificatesResolvers.sample.acme.httpChallenge.entryPoint=web</code></pre></div>
</div>
</div>
<h2 id="traefik-logs">Traefik Logs<a class="headerlink" href="#traefik-logs" title="Permanent link">&para;</a></h2>
<p>In the v2, all the <a href="../../observability/logs/">log configuration</a> remains in the static part but are unified under a <code>log</code> section.
There is no more log configuration at the root level.</p>
<div class="admonition example">
<p class="admonition-title">Simple log configuration</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_11" type="radio" id="__tab_11_0" checked="checked" />
<label for="__tab_11_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
logLevel = "DEBUG"

[traefikLog]
  filePath = "/path/to/traefik.log"
  format   = "json"</code></pre></div>
<input name="__tabs_11" type="radio" id="__tab_11_1" />
<label for="__tab_11_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--logLevel=DEBUG
--traefikLog.filePath=/path/to/traefik.log
--traefikLog.format=json</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_12" type="radio" id="__tab_12_0" checked="checked" />
<label for="__tab_12_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[log]
  level = "DEBUG"
  filePath = "/path/to/log-file.log"
  format = "json"</code></pre></div>
<input name="__tabs_12" type="radio" id="__tab_12_1" />
<label for="__tab_12_1">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># static configuration
log:
  level: DEBUG
  filePath: /path/to/log-file.log
  format: json</code></pre></div>
<input name="__tabs_12" type="radio" id="__tab_12_2" />
<label for="__tab_12_2">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--log.level=DEBUG
--log.filePath=/path/to/traefik.log
--log.format=json</code></pre></div>
</div>
</div>
<h2 id="tracing">Tracing<a class="headerlink" href="#tracing" title="Permanent link">&para;</a></h2>
<p>Traefik v2 retains OpenTracing support. The <code>backend</code> root option from the v1 is gone, you just have to set your <a href="../../observability/tracing/overview/">tracing configuration</a>.</p>
<div class="admonition example">
<p class="admonition-title">Simple Jaeger tracing configuration</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_13" type="radio" id="__tab_13_0" checked="checked" />
<label for="__tab_13_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[tracing]
  backend = "jaeger"
  servicename = "tracing"
  [tracing.jaeger]
    samplingParam = 1.0
    samplingServerURL = "http://12.0.0.1:5778/sampling"
    samplingType = "const"
    localAgentHostPort = "12.0.0.1:6831"</code></pre></div>
<input name="__tabs_13" type="radio" id="__tab_13_1" />
<label for="__tab_13_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--tracing.backend=jaeger
--tracing.servicename=tracing
--tracing.jaeger.localagenthostport=12.0.0.1:6831
--tracing.jaeger.samplingparam=1.0
--tracing.jaeger.samplingserverurl=http://12.0.0.1:5778/sampling
--tracing.jaeger.samplingtype=const</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_14" type="radio" id="__tab_14_0" checked="checked" />
<label for="__tab_14_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[tracing]
  servicename = "tracing"
  [tracing.jaeger]
    samplingParam = 1.0
    samplingServerURL = "http://12.0.0.1:5778/sampling"
    samplingType = "const"
    localAgentHostPort = "12.0.0.1:6831"</code></pre></div>
<input name="__tabs_14" type="radio" id="__tab_14_1" />
<label for="__tab_14_1">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># static configuration
tracing:
  servicename: tracing
  jaeger:
    samplingParam: 1
    samplingServerURL: 'http://12.0.0.1:5778/sampling'
    samplingType: const
    localAgentHostPort: '12.0.0.1:6831'</code></pre></div>
<input name="__tabs_14" type="radio" id="__tab_14_2" />
<label for="__tab_14_2">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--tracing.servicename=tracing
--tracing.jaeger.localagenthostport=12.0.0.1:6831
--tracing.jaeger.samplingparam=1.0
--tracing.jaeger.samplingserverurl=http://12.0.0.1:5778/sampling
--tracing.jaeger.samplingtype=const</code></pre></div>
</div>
</div>
<h2 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h2>
<p>The v2 retains metrics tools and allows metrics to be configured for the entrypoints and/or services.
For a basic configuration, the <a href="../../observability/metrics/overview/">metrics configuration</a> remains the same.</p>
<div class="admonition example">
<p class="admonition-title">Simple Prometheus metrics configuration</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_15" type="radio" id="__tab_15_0" checked="checked" />
<label for="__tab_15_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[metrics.prometheus]
  buckets = [0.1,0.3,1.2,5.0]
  entryPoint = "traefik"</code></pre></div>
<input name="__tabs_15" type="radio" id="__tab_15_1" />
<label for="__tab_15_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--metrics.prometheus.buckets=[0.1,0.3,1.2,5.0]
--metrics.prometheus.entrypoint=traefik</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_16" type="radio" id="__tab_16_0" checked="checked" />
<label for="__tab_16_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[metrics.prometheus]
  buckets = [0.1,0.3,1.2,5.0]
  entryPoint = "metrics"</code></pre></div>
<input name="__tabs_16" type="radio" id="__tab_16_1" />
<label for="__tab_16_1">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># static configuration
metrics:
  prometheus:
    buckets:
      - 0.1
      - 0.3
      - 1.2
      - 5
    entryPoint: metrics</code></pre></div>
<input name="__tabs_16" type="radio" id="__tab_16_2" />
<label for="__tab_16_2">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--metrics.prometheus.buckets=[0.1,0.3,1.2,5.0]
--metrics.prometheus.entrypoint=metrics</code></pre></div>
</div>
</div>
<h2 id="no-more-root-level-keyvalues">No More Root Level Key/Values<a class="headerlink" href="#no-more-root-level-keyvalues" title="Permanent link">&para;</a></h2>
<p>To avoid any source of confusion, there are no more configuration at the root level.
Each root item has been moved to a related section or removed.</p>
<div class="admonition example">
<p class="admonition-title">From root to dedicated section</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_17" type="radio" id="__tab_17_0" checked="checked" />
<label for="__tab_17_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
checkNewVersion = false
sendAnonymousUsage = true
logLevel = "DEBUG"
insecureSkipVerify = true
rootCAs = [ "/mycert.cert" ]
maxIdleConnsPerHost = 200
providersThrottleDuration = "2s"
AllowMinWeightZero = true
debug = true
defaultEntryPoints = ["web", "web-secure"]
keepTrailingSlash = false</code></pre></div>
<input name="__tabs_17" type="radio" id="__tab_17_1" />
<label for="__tab_17_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--checknewversion=false
--sendanonymoususage=true
--loglevel=DEBUG
--insecureskipverify=true
--rootcas=/mycert.cert
--maxidleconnsperhost=200
--providersthrottleduration=2s
--allowminweightzero=true
--debug=true
--defaultentrypoints=web,web-secure
--keeptrailingslash=true</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_18" type="radio" id="__tab_18_0" checked="checked" />
<label for="__tab_18_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml"># static configuration
[global]
  checkNewVersion = true
  sendAnonymousUsage = true

[log]
  level = "DEBUG"

[serversTransport]
  insecureSkipVerify = true
  rootCAs = [ "/mycert.cert" ]
  maxIdleConnsPerHost = 42

[providers]
  providersThrottleDuration = 42</code></pre></div>
<input name="__tabs_18" type="radio" id="__tab_18_1" />
<label for="__tab_18_1">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># static configuration
global:
  checkNewVersion: true
  sendAnonymousUsage: true

log:
  level: DEBUG

serversTransport:
  insecureSkipVerify: true
  rootCAs:
    - /mycert.cert
  maxIdleConnsPerHost: 42

providers:
  providersThrottleDuration: 42</code></pre></div>
<input name="__tabs_18" type="radio" id="__tab_18_2" />
<label for="__tab_18_2">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--global.checknewversion=true
--global.sendanonymoususage=true
--log.level=DEBUG
--serverstransport.insecureskipverify=true
--serverstransport.rootcas=/mycert.cert
--serverstransport.maxidleconnsperhost=42
--providers.providersthrottleduration=42</code></pre></div>
</div>
</div>
<h2 id="dashboard">Dashboard<a class="headerlink" href="#dashboard" title="Permanent link">&para;</a></h2>
<p>You need to activate the API to access the <a href="../../operations/dashboard/">dashboard</a>.
As the dashboard access is now secured by default you can either:</p>
<ul>
<li>define a  <a href="../../operations/api/#configuration">specific router</a> with the <code>api@internal</code> service and one authentication middleware like the following example</li>
<li>or use the <a href="../../operations/api/#insecure">insecure</a> option of the API</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Dashboard with k8s and dedicated router</p>
<p>As <code>api@internal</code> is not a Kubernetes service, you have to use the file provider or the <code>insecure</code> API option.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Activate and access the dashboard</p>
<div class="admonition info">
<p class="admonition-title">v1</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_19" type="radio" id="__tab_19_0" checked="checked" />
<label for="__tab_19_0">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml">## static configuration
# traefik.toml

[entryPoints.web-secure]
  address = ":443"
  [entryPoints.web-secure.tls]
  [entryPoints.web-secure.auth]
    [entryPoints.web-secure.auth.basic]
      users = [
        "test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/"
      ]

[api]
  entryPoint = "web-secure"</code></pre></div>
<input name="__tabs_19" type="radio" id="__tab_19_1" />
<label for="__tab_19_1">CLI</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">--entryPoints='Name:web-secure Address::443 TLS Auth.Basic.Users:test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/'
--api</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">v2</p>
</div>
<div class="superfences-tabs">
<input name="__tabs_20" type="radio" id="__tab_20_0" checked="checked" />
<label for="__tab_20_0">Docker</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># dynamic configuration
labels:
  - "traefik.http.routers.api.rule=Host(`traefik.docker.localhost`)"
  - "traefik.http.routers.api.entrypoints=web-secured"
  - "traefik.http.routers.api.service=api@internal"
  - "traefik.http.routers.api.middlewares=myAuth"
  - "traefik.http.routers.api.tls"
  - "traefik.http.middlewares.myAuth.basicauth.users=test:$$apr1$$H6uskkkW$$IgXLP6ewTrSuBkTrqE8wj/"</code></pre></div>
<input name="__tabs_20" type="radio" id="__tab_20_1" />
<label for="__tab_20_1">File (TOML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-toml">## static configuration
# traefik.toml

[entryPoints.web-secure]
  address = ":443"

[api]

[providers.file]
  directory = "/path/to/dynamic/config"

##---------------------##

## dynamic configuration
# /path/to/dynamic/config/dynamic-conf.toml

[http.routers.api]
  rule = "Host(`traefik.docker.localhost`)"
  entrypoints = ["web-secure"]
  service = "api@internal"
  middlewares = ["myAuth"]
  [http.routers.api.tls]

[http.middlewares.myAuth.basicAuth]
  users = [
    "test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/"
  ]</code></pre></div>
<input name="__tabs_20" type="radio" id="__tab_20_2" />
<label for="__tab_20_2">File (YAML)</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">## static configuration
# traefik.yaml

entryPoints:
  web-secure:
    address: ':443'

api: {}

providers:
  file:
    directory: /path/to/dynamic/config

##---------------------##

## dynamic configuration
# /path/to/dynamic/config/dynamic-conf.yaml

 http:
  routers:
    api:
      rule: Host(`traefik.docker.localhost`)
      entrypoints:
        - web-secure
      service: api@internal
      middlewares:
        - myAuth
      tls: {}

  middlewares:
    myAuth:
      basicAuth:
        users:
          - 'test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/'</code></pre></div>
</div>
</div>
<h2 id="providers">Providers<a class="headerlink" href="#providers" title="Permanent link">&para;</a></h2>
<p>Supported <a href="../../providers/overview/">providers</a>, for now:</p>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Azure Service Fabric</li>
<li class="task-list-item"><input type="checkbox" disabled/> BoltDB</li>
<li class="task-list-item"><input type="checkbox" disabled/> Consul</li>
<li class="task-list-item"><input type="checkbox" disabled/> Consul Catalog</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Docker</li>
<li class="task-list-item"><input type="checkbox" disabled/> DynamoDB</li>
<li class="task-list-item"><input type="checkbox" disabled/> ECS</li>
<li class="task-list-item"><input type="checkbox" disabled/> Etcd</li>
<li class="task-list-item"><input type="checkbox" disabled/> Eureka</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> File</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Kubernetes Ingress (without annotations)</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Kubernetes IngressRoute</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Marathon</li>
<li class="task-list-item"><input type="checkbox" disabled/> Mesos</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Rancher</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Rest</li>
<li class="task-list-item"><input type="checkbox" disabled/> Zookeeper</li>
</ul>
<h2 id="some-tips-you-should-know">Some Tips You Should Know<a class="headerlink" href="#some-tips-you-should-know" title="Permanent link">&para;</a></h2>
<ul>
<li>Different sources of static configuration (file, CLI flags, ...) cannot be <a href="../../getting-started/configuration-overview/#the-static-configuration">mixed</a>.</li>
<li>Now, configuration elements can be referenced between different providers by using the provider namespace notation: <code>@&lt;provider&gt;</code>.
  For instance, a router named <code>myrouter</code> in a File Provider can refer to a service named <code>myservice</code> defined in Docker Provider with the following notation: <code>myservice@docker</code>.</li>
<li>Middlewares are applied in the same order as their declaration in router.</li>
<li>If you have any questions feel free to join our <a href="https://community.containo.us">community forum</a>.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      



<!-- Application footer -->
<footer class="md-footer">

    <!-- Further information -->
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">

            <!-- Copyright and theme information -->
            <div class="md-footer-copyright">
                
                <div class="md-footer-copyright__highlight">
                    Copyright &copy; 2016-2019 Containous
                </div>
                
                powered by
                <a href="https://www.mkdocs.org" title="MkDocs">MkDocs</a>
                and
                <a href="https://squidfunk.github.io/mkdocs-material/"
                   title="Material for MkDocs">
                    Material for MkDocs</a>
            </div>

            <!-- Social links -->
            
            
            
        </div>
    </div>
</footer>


    </div>
    
      <script src="../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../assets/js/hljs/highlight.pack.js"></script>
      
        <script src="../../assets/js/extra.js"></script>
      
        <script src="../../theme/js/structor-menu.js"></script>
      
    
  </body>
</html>