



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Traefik Documentation">
      
      
      
        <meta name="author" content="containo.us">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/img/traefik.icon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Kubernetes IngressRoute - Traefik</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../assets/styles/extra.css">
    
      <link rel="stylesheet" href="../../../assets/styles/atom-one-light.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-51880359-3", "docs.traefik.io")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="cyan">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#traefik-kubernetes" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Traefik" class="md-header-nav__button md-logo">
          
            <img src="../../../assets/img/traefik.logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Traefik
            </span>
            <span class="md-header-nav__topic">
              
                Kubernetes IngressRoute
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/containous/traefik/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Traefik" class="md-nav__button md-logo">
      
        <img src="../../../assets/img/traefik.logo.png" width="48" height="48">
      
    </a>
    Traefik
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/containous/traefik/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/configuration-overview/" title="Configuration Introduction" class="md-nav__link">
      Configuration Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/install-traefik/" title="Install Traefik" class="md-nav__link">
      Install Traefik
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Configuration Discovery
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Configuration Discovery
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/kubernetes-crd/" title="Kubernetes IngressRoute" class="md-nav__link">
      Kubernetes IngressRoute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/kubernetes-ingress/" title="Kubernetes Ingress" class="md-nav__link">
      Kubernetes Ingress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/consul-catalog/" title="Consul Catalog" class="md-nav__link">
      Consul Catalog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/rancher/" title="Rancher" class="md-nav__link">
      Rancher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../providers/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Routing & Load Balancing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Routing & Load Balancing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../entrypoints/" title="EntryPoints" class="md-nav__link">
      EntryPoints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routers/" title="Routers" class="md-nav__link">
      Routers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/" title="Services" class="md-nav__link">
      Services
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5" checked>
    
    <label class="md-nav__link" for="nav-4-5">
      Providers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Providers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Kubernetes IngressRoute
      </label>
    
    <a href="./" title="Kubernetes IngressRoute" class="md-nav__link md-nav__link--active">
      Kubernetes IngressRoute
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-examples" class="md-nav__link">
    Configuration Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routing-configuration" class="md-nav__link">
    Routing Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-resource-definition-crd" class="md-nav__link">
    Custom Resource Definition (CRD)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-ingressroute" class="md-nav__link">
    Kind: IngressRoute
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-middleware" class="md-nav__link">
    Kind: Middleware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-traefikservice" class="md-nav__link">
    Kind: TraefikService
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-load-balancing" class="md-nav__link">
    Server Load Balancing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weighted-round-robin" class="md-nav__link">
    Weighted Round Robin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mirroring" class="md-nav__link">
    Mirroring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-ingressroutetcp" class="md-nav__link">
    Kind IngressRouteTCP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-tlsoption" class="md-nav__link">
    Kind: TLSOption
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further" class="md-nav__link">
    Further
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../consul-catalog/" title="Consul Catalog" class="md-nav__link">
      Consul Catalog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rancher/" title="Rancher" class="md-nav__link">
      Rancher
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      HTTPS & TLS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        HTTPS & TLS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../https/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../https/tls/" title="TLS" class="md-nav__link">
      TLS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../https/acme/" title="Let's Encrypt" class="md-nav__link">
      Let's Encrypt
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Middlewares
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Middlewares
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/addprefix/" title="AddPrefix" class="md-nav__link">
      AddPrefix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/basicauth/" title="BasicAuth" class="md-nav__link">
      BasicAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/buffering/" title="Buffering" class="md-nav__link">
      Buffering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/chain/" title="Chain" class="md-nav__link">
      Chain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/circuitbreaker/" title="CircuitBreaker" class="md-nav__link">
      CircuitBreaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/compress/" title="Compress" class="md-nav__link">
      Compress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/contenttype/" title="ContentType" class="md-nav__link">
      ContentType
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/digestauth/" title="DigestAuth" class="md-nav__link">
      DigestAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/errorpages/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/forwardauth/" title="ForwardAuth" class="md-nav__link">
      ForwardAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/headers/" title="Headers" class="md-nav__link">
      Headers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/ipwhitelist/" title="IpWhitelist" class="md-nav__link">
      IpWhitelist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/inflightreq/" title="InFlightReq" class="md-nav__link">
      InFlightReq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/passtlsclientcert/" title="PassTLSClientCert" class="md-nav__link">
      PassTLSClientCert
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/ratelimit/" title="RateLimit" class="md-nav__link">
      RateLimit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/redirectregex/" title="RedirectRegex" class="md-nav__link">
      RedirectRegex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/redirectscheme/" title="RedirectScheme" class="md-nav__link">
      RedirectScheme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/replacepath/" title="ReplacePath" class="md-nav__link">
      ReplacePath
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/replacepathregex/" title="ReplacePathRegex" class="md-nav__link">
      ReplacePathRegex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/retry/" title="Retry" class="md-nav__link">
      Retry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/stripprefix/" title="StripPrefix" class="md-nav__link">
      StripPrefix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../middlewares/stripprefixregex/" title="StripPrefixRegex" class="md-nav__link">
      StripPrefixRegex
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Operations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../operations/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../operations/dashboard/" title="Dashboard" class="md-nav__link">
      Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../operations/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../operations/ping/" title="Ping" class="md-nav__link">
      Ping
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Observability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Observability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/logs/" title="Logs" class="md-nav__link">
      Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/access-logs/" title="Access Logs" class="md-nav__link">
      Access Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3" type="checkbox" id="nav-8-3">
    
    <label class="md-nav__link" for="nav-8-3">
      Metrics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-3">
        Metrics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/metrics/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/metrics/datadog/" title="Datadog" class="md-nav__link">
      Datadog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/metrics/influxdb/" title="InfluxDB" class="md-nav__link">
      InfluxDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/metrics/prometheus/" title="Prometheus" class="md-nav__link">
      Prometheus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/metrics/statsd/" title="StatsD" class="md-nav__link">
      StatsD
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" type="checkbox" id="nav-8-4">
    
    <label class="md-nav__link" for="nav-8-4">
      Tracing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-4">
        Tracing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/tracing/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/tracing/jaeger/" title="Jaeger" class="md-nav__link">
      Jaeger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/tracing/zipkin/" title="Zipkin" class="md-nav__link">
      Zipkin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/tracing/datadog/" title="Datadog" class="md-nav__link">
      Datadog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/tracing/instana/" title="Instana" class="md-nav__link">
      Instana
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../observability/tracing/haystack/" title="Haystack" class="md-nav__link">
      Haystack
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      User Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        User Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guides/crd-acme/" title="Kubernetes and Let's Encrypt" class="md-nav__link">
      Kubernetes and Let's Encrypt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guides/grpc/" title="gRPC Examples" class="md-nav__link">
      gRPC Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guides/marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-4" type="checkbox" id="nav-9-4">
    
    <label class="md-nav__link" for="nav-9-4">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-4">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guides/docker-compose/basic-example/" title="Basic Example" class="md-nav__link">
      Basic Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-4-2" type="checkbox" id="nav-9-4-2">
    
    <label class="md-nav__link" for="nav-9-4-2">
      HTTPS with Let's Encrypt
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-9-4-2">
        HTTPS with Let's Encrypt
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guides/docker-compose/acme-tls/" title="TLS Challenge" class="md-nav__link">
      TLS Challenge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guides/docker-compose/acme-http/" title="HTTP Challenge" class="md-nav__link">
      HTTP Challenge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guides/docker-compose/acme-dns/" title="DNS Challenge" class="md-nav__link">
      DNS Challenge
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Migration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Migration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../migration/v2/" title="Traefik v2 minor migrations" class="md-nav__link">
      Traefik v2 minor migrations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../migration/v1-to-v2/" title="Traefik v1 to v2" class="md-nav__link">
      Traefik v1 to v2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/thank-you/" title="Thank You!" class="md-nav__link">
      Thank You!
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/submitting-issues/" title="Submitting Issues" class="md-nav__link">
      Submitting Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/submitting-pull-requests/" title="Submitting PRs" class="md-nav__link">
      Submitting PRs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/submitting-security-issues/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/building-testing/" title="Building and Testing" class="md-nav__link">
      Building and Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/documentation/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/data-collection/" title="Data Collection" class="md-nav__link">
      Data Collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/advocating/" title="Advocating" class="md-nav__link">
      Advocating
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../contributing/maintainers/" title="Maintainers" class="md-nav__link">
      Maintainers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      References
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-1" type="checkbox" id="nav-12-1">
    
    <label class="md-nav__link" for="nav-12-1">
      Static Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-1">
        Static Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/static-configuration/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/static-configuration/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/static-configuration/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/static-configuration/env/" title="Environment variables" class="md-nav__link">
      Environment variables
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-2" type="checkbox" id="nav-12-2">
    
    <label class="md-nav__link" for="nav-12-2">
      Dynamic Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-2">
        Dynamic Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/dynamic-configuration/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/dynamic-configuration/docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/dynamic-configuration/kubernetes-crd/" title="Kubernetes CRD" class="md-nav__link">
      Kubernetes CRD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/dynamic-configuration/consul-catalog/" title="Consul Catalog" class="md-nav__link">
      Consul Catalog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/dynamic-configuration/marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/dynamic-configuration/rancher/" title="Rancher" class="md-nav__link">
      Rancher
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-examples" class="md-nav__link">
    Configuration Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routing-configuration" class="md-nav__link">
    Routing Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-resource-definition-crd" class="md-nav__link">
    Custom Resource Definition (CRD)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-ingressroute" class="md-nav__link">
    Kind: IngressRoute
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-middleware" class="md-nav__link">
    Kind: Middleware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-traefikservice" class="md-nav__link">
    Kind: TraefikService
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-load-balancing" class="md-nav__link">
    Server Load Balancing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weighted-round-robin" class="md-nav__link">
    Weighted Round Robin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mirroring" class="md-nav__link">
    Mirroring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-ingressroutetcp" class="md-nav__link">
    Kind IngressRouteTCP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kind-tlsoption" class="md-nav__link">
    Kind: TLSOption
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further" class="md-nav__link">
    Further
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/containous/traefik/edit/v2.1/docs/content/routing/providers/kubernetes-crd.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="traefik-kubernetes">Traefik &amp; Kubernetes<a class="headerlink" href="#traefik-kubernetes" title="Permanent link">&para;</a></h1>
<p class="subtitle">The Kubernetes Ingress Controller, The Custom Resource Way.</p>
<h2 id="configuration-examples">Configuration Examples<a class="headerlink" href="#configuration-examples" title="Permanent link">&para;</a></h2>
<details class="example"><summary>Configuring KubernetesCRD and Deploying/Exposing Services</summary><div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Resource Definition</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># All resources definition must be declared
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: ingressroutes.traefik.containo.us

spec:
  group: traefik.containo.us
  version: v1alpha1
  names:
    kind: IngressRoute
    plural: ingressroutes
    singular: ingressroute
  scope: Namespaced

---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: middlewares.traefik.containo.us

spec:
  group: traefik.containo.us
  version: v1alpha1
  names:
    kind: Middleware
    plural: middlewares
    singular: middleware
  scope: Namespaced

---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: ingressroutetcps.traefik.containo.us

spec:
  group: traefik.containo.us
  version: v1alpha1
  names:
    kind: IngressRouteTCP
    plural: ingressroutetcps
    singular: ingressroutetcp
  scope: Namespaced

---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: tlsoptions.traefik.containo.us

spec:
  group: traefik.containo.us
  version: v1alpha1
  names:
    kind: TLSOption
    plural: tlsoptions
    singular: tlsoption
  scope: Namespaced

---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: traefikservices.traefik.containo.us

spec:
  group: traefik.containo.us
  version: v1alpha1
  names:
    kind: TraefikService
    plural: traefikservices
    singular: traefikservice
  scope: Namespaced</code></pre></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">RBAC</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: traefik-ingress-controller

rules:
  - apiGroups:
      - ""
    resources:
      - services
      - endpoints
      - secrets
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - extensions
    resources:
      - ingresses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - extensions
    resources:
      - ingresses/status
    verbs:
      - update
  - apiGroups:
      - traefik.containo.us
    resources:
      - middlewares
      - ingressroutes
      - traefikservices
      - ingressroutetcps
      - tlsoptions
    verbs:
      - get
      - list
      - watch

---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: traefik-ingress-controller

roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: traefik-ingress-controller
subjects:
  - kind: ServiceAccount
    name: traefik-ingress-controller
    namespace: default</code></pre></div>
<input name="__tabs_1" type="radio" id="__tab_1_2" />
<label for="__tab_1_2">Traefik</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: traefik-ingress-controller

---
kind: Deployment
apiVersion: extensions/v1beta1
metadata:
  name: traefik
  labels:
    app: traefik

spec:
  replicas: 1
  selector:
    matchLabels:
      app: traefik
  template:
    metadata:
      labels:
        app: traefik
    spec:
      serviceAccountName: traefik-ingress-controller
      containers:
        - name: traefik
          image: traefik:v2.1
          args:
            - --log.level=DEBUG
            - --api
            - --api.insecure
            - --entrypoints.web.address=:80
            - --providers.kubernetescrd
          ports:
            - name: web
              containerPort: 80
            - name: admin
              containerPort: 8080

---
apiVersion: v1
kind: Service
metadata:
  name: traefik
spec:
  type: LoadBalancer
  selector:
    app: traefik
  ports:
    - protocol: TCP
      port: 80
      name: web
      targetPort: 80
    - protocol: TCP
      port: 8080
      name: admin
      targetPort: 8080</code></pre></div>
<input name="__tabs_1" type="radio" id="__tab_1_3" />
<label for="__tab_1_3">IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: myingressroute
  namespace: default

spec:
  entryPoints:
    - web

  routes:
  - match: Host(`foo`) &amp;&amp; PathPrefix(`/bar`)
    kind: Rule
    services:
    - name: whoami
      port: 80</code></pre></div>
<input name="__tabs_1" type="radio" id="__tab_1_4" />
<label for="__tab_1_4">Whoami</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">kind: Deployment
apiVersion: extensions/v1beta1
metadata:
  name: whoami
  namespace: default
  labels:
    app: containous
    name: whoami

spec:
  replicas: 2
  selector:
    matchLabels:
      app: containous
      task: whoami
  template:
    metadata:
      labels:
        app: containous
        task: whoami
    spec:
      containers:
        - name: containouswhoami
          image: containous/whoami
          ports:
            - containerPort: 80

---
apiVersion: v1
kind: Service
metadata:
  name: whoami
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: whoami</code></pre></div>
</div>
</details>
<h2 id="routing-configuration">Routing Configuration<a class="headerlink" href="#routing-configuration" title="Permanent link">&para;</a></h2>
<h3 id="custom-resource-definition-crd">Custom Resource Definition (CRD)<a class="headerlink" href="#custom-resource-definition-crd" title="Permanent link">&para;</a></h3>
<ul>
<li>You can find an exhaustive list, generated from Traefik's source code, of the custom resources and their attributes in <a href="../../../reference/dynamic-configuration/kubernetes-crd/">the reference page</a>.</li>
<li>Validate that <a href="../../../providers/kubernetes-crd/#configuration-requirements">the prerequisites</a> are fulfilled before using the Traefik custom resources.</li>
<li>Traefik CRDs are building blocks that you can assemble according to your needs.</li>
</ul>
<p>You can find an excerpt of the available custom resources in the table below:</p>
<table>
<thead>
<tr>
<th>Kind</th>
<th>Purpose</th>
<th>Concept Behind</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#kind-ingressroute">IngressRoute</a></td>
<td>HTTP Routing</td>
<td><a href="../../routers/#configuring-http-routers">HTTP router</a></td>
</tr>
<tr>
<td><a href="#kind-middleware">Middleware</a></td>
<td>Tweaks the HTTP requests before they are sent to your service</td>
<td><a href="../../../middlewares/overview/">HTTP Middlewares</a></td>
</tr>
<tr>
<td><a href="#kind-traefikservice">TraefikService</a></td>
<td>Abstraction for HTTP loadbalancing/mirroring</td>
<td><a href="../../services/#configuring-http-services">HTTP service</a></td>
</tr>
<tr>
<td><a href="#kind-ingressroutetcp">IngressRouteTCP</a></td>
<td>TCP Routing</td>
<td><a href="../../routers/#configuring-tcp-routers">TCP router</a></td>
</tr>
<tr>
<td><a href="#kind-tlsoption">TLSOptions</a></td>
<td>Allows to configure some parameters of the TLS connection</td>
<td><a href="../../../https/tls/#tls-options">TLSOptions</a></td>
</tr>
</tbody>
</table>
<h3 id="kind-ingressroute">Kind: <code>IngressRoute</code><a class="headerlink" href="#kind-ingressroute" title="Permanent link">&para;</a></h3>
<p><code>IngressRoute</code> is the CRD implementation of a <a href="../../routers/#configuring-http-routers">Traefik HTTP router</a>.</p>
<p>Register the <code>IngressRoute</code> kind in the Kubernetes cluster before creating <code>IngressRoute</code> objects.</p>
<div class="admonition info">
<p class="admonition-title">IngressRoute Attributes</p>
<pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: foo
  namespace: bar
spec:
  entryPoints:                      # [1]
    - foo
  routes:                           # [2]
  - kind: Rule
    match: Host(`test.domain.com`)  # [3]
    priority: 10                    # [4]
    middlewares:                    # [5]
    - name: middleware1             # [6]
      namespace: default            # [7]
    services:                       # [8]
    - kind: Service
      name: foo
      namespace: default
      passHostHeader: true
      port: 80
      responseForwarding:
        flushInterval: 1ms
      scheme: https
      sticky:
        cookie:
          httpOnly: true
          name: cookie
          secure: true
      strategy: RoundRobin
      weight: 10
  tls:                              # [9]
    secretName: supersecret         # [10]
    options:                        # [11]
      name: opt                     # [12]
      namespace: default            # [13]
    certResolver: foo               # [14]
    domains:                        # [15]
    - main: foo.com                 # [16]
      sans:                         # [17]
      - a.foo.com
      - b.foo.com</code></pre>

</div>
<table>
<thead>
<tr>
<th>Ref</th>
<th>Attribute</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>[1]</td>
<td><code>entryPoints</code></td>
<td>List of <a href="../../routers/#entrypoints">entry points</a> name</td>
</tr>
<tr>
<td>[2]</td>
<td><code>routes</code></td>
<td>List of route</td>
</tr>
<tr>
<td>[3]</td>
<td><code>routes[n].match</code></td>
<td>Defines the <a href="../../routers/#rule">rule</a> corresponding to an underlying router.</td>
</tr>
<tr>
<td>[4]</td>
<td><code>routes[n].priority</code></td>
<td><a href="../../routers/#priority">Disambiguate</a> rules of the same length, for route matching</td>
</tr>
<tr>
<td>[5]</td>
<td><code>routes[n].middlewares</code></td>
<td>List of reference to <a href="#kind-middleware">Middleware</a></td>
</tr>
<tr>
<td>[6]</td>
<td><code>middlewares[n].name</code></td>
<td>Defines the <a href="#kind-middleware">Middleware</a> name</td>
</tr>
<tr>
<td>[7]</td>
<td><code>middlewares[n].namespace</code></td>
<td>Defines the <a href="#kind-middleware">Middleware</a> namespace</td>
</tr>
<tr>
<td>[8]</td>
<td><code>routes[n].services</code></td>
<td>List of any combination of <a href="#kind-traefikservice">TraefikService</a> and reference to a <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes service</a></td>
</tr>
<tr>
<td>[9]</td>
<td><code>tls</code></td>
<td>Defines <a href="../../routers/#tls">TLS</a> certificate configuration</td>
</tr>
<tr>
<td>[10]</td>
<td><code>tls.secretName</code></td>
<td>Defines the <a href="https://kubernetes.io/docs/concepts/configuration/secret/">secret</a> name used to store the certificate (in the <code>IngressRoute</code> namespace)</td>
</tr>
<tr>
<td>[11]</td>
<td><code>tls.options</code></td>
<td>Defines the reference to a <a href="#kind-tlsoption">TLSOption</a></td>
</tr>
<tr>
<td>[12]</td>
<td><code>options.name</code></td>
<td>Defines the <a href="#kind-tlsoption">TLSOption</a> name</td>
</tr>
<tr>
<td>[13]</td>
<td><code>options.namespace</code></td>
<td>Defines the <a href="#kind-tlsoption">TLSOption</a> namespace</td>
</tr>
<tr>
<td>[14]</td>
<td><code>tls.certResolver</code></td>
<td>Defines the reference to a <a href="../../routers/#certresolver">CertResolver</a></td>
</tr>
<tr>
<td>[15]</td>
<td><code>tls.domains</code></td>
<td>List of <a href="../../routers/#domains">domains</a></td>
</tr>
<tr>
<td>[16]</td>
<td><code>domains[n].main</code></td>
<td>Defines the main domain name</td>
</tr>
<tr>
<td>[17]</td>
<td><code>domains[n].sans</code></td>
<td>List of SANs (alternative domains)</td>
</tr>
</tbody>
</table>
<details class="example"><summary>Declaring an IngressRoute</summary><div class="superfences-tabs">
<input name="__tabs_2" type="radio" id="__tab_2_0" checked="checked" />
<label for="__tab_2_0">IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># All resources definition must be declared
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: testName
  namespace: default
spec:
  entryPoints:
    - web
  routes:
  - kind: Rule
    match: Host(`test.domain.com`)
    middlewares:
    - name: middleware1
      namespace: default
    priority: 10
    services:
    - kind: Service
      name: foo
      namespace: default
      passHostHeader: true
      port: 80
      responseForwarding:
        flushInterval: 1ms
      scheme: https
      sticky:
        cookie:
          httpOnly: true
          name: cookie
          secure: true
      strategy: RoundRobin
      weight: 10
  tls:
    certResolver: foo
    domains:
    - main: foo.com
      sans:
      - a.foo.com
      - b.foo.com
    options:
      name: opt
      namespace: default
    secretName: supersecret</code></pre></div>
<input name="__tabs_2" type="radio" id="__tab_2_1" />
<label for="__tab_2_1">Middlewares</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># All resources definition must be declared
# Prefixing with /foo
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: middleware1
  namespace: default
spec:
  addPrefix:
    prefix: /foo</code></pre></div>
<input name="__tabs_2" type="radio" id="__tab_2_2" />
<label for="__tab_2_2">TLSOption</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: TLSOption
metadata:
  name: opt
  namespace: default

spec:
  minVersion: VersionTLS12</code></pre></div>
<input name="__tabs_2" type="radio" id="__tab_2_3" />
<label for="__tab_2_3">Secret</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: supersecret

data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0=
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0=</code></pre></div>
</div>
</details>
<h3 id="kind-middleware">Kind: <code>Middleware</code><a class="headerlink" href="#kind-middleware" title="Permanent link">&para;</a></h3>
<p><code>Middleware</code> is the CRD implementation of a <a href="../../../middlewares/overview/">Traefik middleware</a>.</p>
<p>Register the <code>Middleware</code> kind in the Kubernetes cluster before creating <code>Middleware</code> objects or referencing middlewares in the <a href="#kind-ingressroute"><code>IngressRoute</code></a> objects.</p>
<details><summary>Declaring and Referencing a Middleware</summary><div class="superfences-tabs">
<input name="__tabs_3" type="radio" id="__tab_3_0" checked="checked" />
<label for="__tab_3_0">Middleware</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: stripprefix
  namespace: foo

spec:
  stripPrefix:
    prefixes:
      - /stripit</code></pre></div>
<input name="__tabs_3" type="radio" id="__tab_3_1" />
<label for="__tab_3_1">IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: ingressroutebar

spec:
  entryPoints:
    - web
  routes:
  - match: Host(`bar.com`) &amp;&amp; PathPrefix(`/stripit`)
    kind: Rule
    services:
    - name: whoami
      port: 80
    middlewares:
    - name: stripprefix
      namespace: foo</code></pre></div>
</div>
</details>
<div class="admonition important">
<p class="admonition-title">Cross-provider namespace</p>
<p>As Kubernetes also has its own notion of namespace, one should not confuse the kubernetes namespace of a resource
(in the reference to the middleware) with the <a href="../../../middlewares/overview/#provider-namespace">provider namespace</a>,
when the definition of the middleware comes from another provider.
In this context, specifying a namespace when referring to the resource does not make any sense, and will be ignored.</p>
</div>
<p>More information about available middlewares in the dedicated <a href="../../../middlewares/overview/">middlewares section</a>.</p>
<h3 id="kind-traefikservice">Kind: <code>TraefikService</code><a class="headerlink" href="#kind-traefikservice" title="Permanent link">&para;</a></h3>
<p><code>TraefikService</code> is the CRD implementation of a <a href="../../services/">"Traefik Service"</a>.</p>
<p>Register the <code>TraefikService</code> kind in the Kubernetes cluster before creating <code>TraefikService</code> objects,
referencing services in the <a href="#kind-ingressroute"><code>IngressRoute</code></a>/<a href="#kind-ingressroutetcp"><code>IngressRouteTCP</code></a> objects or recursively in others <code>TraefikService</code> objects.</p>
<div class="admonition info">
<p class="admonition-title">Disambiguate Traefik and Kubernetes Services </p>
<p>As the field <code>name</code> can reference different types of objects, use the field <code>kind</code> to avoid any ambiguity.</p>
<p>The field <code>kind</code> allows the following values:</p>
<ul>
<li><code>Service</code> (default value): to reference a <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes Service</a></li>
<li><code>TraefikService</code>: to reference another <a href="../../services/">Traefik Service</a></li>
</ul>
</div>
<p><code>TraefikService</code> object allows to use any (valid) combinations of:</p>
<ul>
<li>servers <a href="#server-load-balancing">load balancing</a>.  </li>
<li>services <a href="#weighted-round-robin">Weighted Round Robin</a> load balancing.</li>
<li>services <a href="#mirroring">mirroring</a>.</li>
</ul>
<h4 id="server-load-balancing">Server Load Balancing<a class="headerlink" href="#server-load-balancing" title="Permanent link">&para;</a></h4>
<p>More information in the dedicated server <a href="../../services/#load-balancing">load balancing</a> section.</p>
<details><summary>Declaring and Using Server Load Balancing</summary><div class="superfences-tabs">
<input name="__tabs_4" type="radio" id="__tab_4_0" checked="checked" />
<label for="__tab_4_0">IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: ingressroutebar
  namespace: default

spec:
  entryPoints:
    - web
  routes:
  - match: Host(`bar.com`) &amp;&amp; PathPrefix(`/foo`)
    kind: Rule
    services:
    - name: svc1
      namespace: default
    - name: svc2
      namespace: default</code></pre></div>
<input name="__tabs_4" type="radio" id="__tab_4_1" />
<label for="__tab_4_1">K8s Service</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: svc1
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: app1
---
apiVersion: v1
kind: Service
metadata:
  name: svc2
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: app2</code></pre></div>
</div>
</details>
<h4 id="weighted-round-robin">Weighted Round Robin<a class="headerlink" href="#weighted-round-robin" title="Permanent link">&para;</a></h4>
<p>More information in the dedicated <a href="../../services/#weighted-round-robin-service">Weighted Round Robin</a> service load balancing section.</p>
<details><summary>Declaring and Using Weighted Round Robin</summary><div class="superfences-tabs">
<input name="__tabs_5" type="radio" id="__tab_5_0" checked="checked" />
<label for="__tab_5_0">IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: ingressroutebar
  namespace: default

spec:
  entryPoints:
    - web
  routes:
  - match: Host(`bar.com`) &amp;&amp; PathPrefix(`/foo`)
    kind: Rule
    services:
    - name: wrr1
      namespace: default
      kind: TraefikService</code></pre></div>
<input name="__tabs_5" type="radio" id="__tab_5_1" />
<label for="__tab_5_1">Weighted Round Robin</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: TraefikService
metadata:
  name: wrr1
  namespace: default

spec:
  weighted:
    services:
      - name: svc1
        port: 80
        weight: 1
      - name: wrr2
        kind: TraefikService
        weight: 1
      - name: mirror1
        kind: TraefikService
        weight: 1

---
apiVersion: traefik.containo.us/v1alpha1
kind: TraefikService
metadata:
  name: wrr2
  namespace: default

spec:
  weighted:
    services:
      - name: svc2
        port: 80
        weight: 1
      - name: svc3
        port: 80
        weight: 1</code></pre></div>
<input name="__tabs_5" type="radio" id="__tab_5_2" />
<label for="__tab_5_2">K8s Service</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: svc1
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: app1
---
apiVersion: v1
kind: Service
metadata:
  name: svc2
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: app2
---
apiVersion: v1
kind: Service
metadata:
  name: svc3
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: app3</code></pre></div>
</div>
</details>
<h4 id="mirroring">Mirroring<a class="headerlink" href="#mirroring" title="Permanent link">&para;</a></h4>
<p>More information in the dedicated <a href="../../services/#mirroring-service">mirroring</a> service section.</p>
<details><summary>Declaring and Using Mirroring</summary><div class="superfences-tabs">
<input name="__tabs_6" type="radio" id="__tab_6_0" checked="checked" />
<label for="__tab_6_0">IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: ingressroutebar
  namespace: default

spec:
  entryPoints:
    - web
  routes:
  - match: Host(`bar.com`) &amp;&amp; PathPrefix(`/foo`)
    kind: Rule
    services:
    - name: mirror1
      namespace: default
      kind: TraefikService</code></pre></div>
<input name="__tabs_6" type="radio" id="__tab_6_1" />
<label for="__tab_6_1">Mirroring k8s Service</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># Mirroring from a k8s Service
apiVersion: traefik.containo.us/v1alpha1
kind: TraefikService
metadata:
  name: mirror1
  namespace: default

spec:
  mirroring:
    name: svc1
    port: 80
    mirrors:
      - name: svc2
        port: 80
        percent: 20
      - name: svc3
        kind: TraefikService
        percent: 20</code></pre></div>
<input name="__tabs_6" type="radio" id="__tab_6_2" />
<label for="__tab_6_2">Mirroring Traefik Service</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml"># Mirroring from a Traefik Service
apiVersion: traefik.containo.us/v1alpha1
kind: TraefikService
metadata:
  name: mirror1
  namespace: default

spec:
  mirroring:
    name: wrr1
    kind: TraefikService
     mirrors:
       - name: svc2
         port: 80
         percent: 20
       - name: svc3
         kind: TraefikService
         percent: 20</code></pre></div>
<input name="__tabs_6" type="radio" id="__tab_6_3" />
<label for="__tab_6_3">K8s Service</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: svc1
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: app1
---
apiVersion: v1
kind: Service
metadata:
  name: svc2
  namespace: default

spec:
  ports:
    - name: http
      port: 80
  selector:
    app: containous
    task: app2</code></pre></div>
</div>
</details>
<div class="admonition important">
<p class="admonition-title">References and namespaces</p>
<p>If the optional <code>namespace</code> attribute is not set, the configuration will be applied with the namespace of the current resource.</p>
<p>Additionally, when the definition of the <code>TraefikService</code> is from another provider,
the cross-provider syntax (<code>service@provider</code>) should be used to refer to the <code>TraefikService</code>, just as in the middleware case.</p>
<p>Specifying a namespace attribute in this case would not make any sense, and will be ignored (except if the provider is <code>kubernetescrd</code>).</p>
</div>
<h3 id="kind-ingressroutetcp">Kind <code>IngressRouteTCP</code><a class="headerlink" href="#kind-ingressroutetcp" title="Permanent link">&para;</a></h3>
<p><code>IngressRouteTCP</code> is the CRD implementation of a <a href="../../routers/#configuring-tcp-routers">Traefik TCP router</a>.</p>
<p>Register the <code>IngressRouteTCP</code> kind in the Kubernetes cluster before creating <code>IngressRouteTCP</code> objects.</p>
<div class="admonition info">
<p class="admonition-title">IngressRouteTCP Attributes</p>
<pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRouteTCP
metadata:
  name: ingressroutetcpfoo

spec:
  entryPoints:                  # [1]
    - footcp
  routes:                       # [2]
  - match: HostSNI(`*`)         # [3]
    services:                   # [4]
    - name: foo                 # [5]
      port: 8080                # [6]
      weight: 10                # [7]
      TerminationDelay: 400     # [8]
  tls:                          # [9]
    secretName: supersecret     # [10]
    options:                    # [11]
      name: opt                 # [12]
      namespace: default        # [13]
    certResolver: foo           # [14]
    domains:                    # [15]
    - main: foo.com             # [16]
      sans:                     # [17]
      - a.foo.com
      - b.foo.com
    passthrough: false          # [18]</code></pre>

</div>
<table>
<thead>
<tr>
<th>Ref</th>
<th>Attribute</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>[1]</td>
<td><code>entryPoints</code></td>
<td>List of <a href="../../routers/#entrypoints_1">entrypoints</a> name</td>
</tr>
<tr>
<td>[2]</td>
<td><code>routes</code></td>
<td>List of route</td>
</tr>
<tr>
<td>[3]</td>
<td><code>routes[n].match</code></td>
<td>Defines the <a href="../../routers/#rule_1">rule</a> corresponding to an underlying router.</td>
</tr>
<tr>
<td>[4]</td>
<td><code>routes[n].services</code></td>
<td>List of any combination of <a href="#kind-traefikservice">TraefikService</a> and reference to a <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes service</a></td>
</tr>
<tr>
<td>[5]</td>
<td><code>services[n].name</code></td>
<td>Defines the name of a <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes service</a></td>
</tr>
<tr>
<td>[6]</td>
<td><code>services[n].port</code></td>
<td>Defines the port of a <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes service</a></td>
</tr>
<tr>
<td>[7]</td>
<td><code>services[n].weight</code></td>
<td>Defines the weight to apply to the server load balancing</td>
</tr>
<tr>
<td>[8]</td>
<td><code>services[n].TerminationDelay</code></td>
<td>corresponds to the deadline that the proxy sets, after one of its connected peers indicates it has closed the writing capability of its connection, to close the reading capability as well, hence fully terminating the connection.<br/>It is a duration in milliseconds, defaulting to 100. A negative value means an infinite deadline (i.e. the reading capability is never closed).</td>
</tr>
<tr>
<td>[9]</td>
<td><code>tls</code></td>
<td>Defines <a href="../../routers/#tls_1">TLS</a> certificate configuration</td>
</tr>
<tr>
<td>[10]</td>
<td><code>tls.secretName</code></td>
<td>Defines the <a href="https://kubernetes.io/docs/concepts/configuration/secret/">secret</a> name used to store the certificate (in the <code>IngressRoute</code> namespace)</td>
</tr>
<tr>
<td>[11]</td>
<td><code>tls.options</code></td>
<td>Defines the reference to a <a href="#kind-tlsoption">TLSOption</a></td>
</tr>
<tr>
<td>[12]</td>
<td><code>options.name</code></td>
<td>Defines the <a href="#kind-tlsoption">TLSOption</a> name</td>
</tr>
<tr>
<td>[13]</td>
<td><code>options.namespace</code></td>
<td>Defines the <a href="#kind-tlsoption">TLSOption</a> namespace</td>
</tr>
<tr>
<td>[14]</td>
<td><code>tls.certResolver</code></td>
<td>Defines the reference to a <a href="../../routers/#certresolver_1">CertResolver</a></td>
</tr>
<tr>
<td>[15]</td>
<td><code>tls.domains</code></td>
<td>List of <a href="../../routers/#domains_1">domains</a></td>
</tr>
<tr>
<td>[16]</td>
<td><code>domains[n].main</code></td>
<td>Defines the main domain name</td>
</tr>
<tr>
<td>[17]</td>
<td><code>domains[n].sans</code></td>
<td>List of SANs (alternative domains)</td>
</tr>
<tr>
<td>[18]</td>
<td><code>tls.passthrough</code></td>
<td>If <code>true</code>, delegates the TLS termination to the backend</td>
</tr>
</tbody>
</table>
<details class="example"><summary>Declaring an IngressRouteTCP</summary><div class="superfences-tabs">
<input name="__tabs_7" type="radio" id="__tab_7_0" checked="checked" />
<label for="__tab_7_0">IngressRouteTCP</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRouteTCP
metadata:
  name: ingressroutetcpfoo

spec:
  entryPoints:
    - footcp
  routes:
  # Match is the rule corresponding to an underlying router.
  - match: HostSNI(`*`)
    services:
    - name: foo
      port: 8080
      TerminationDelay: 400
      weight: 10
    - name: bar
      port: 8081
      TerminationDelay: 500
      weight: 10
  tls:
    certResolver: foo
    domains:
    - main: foo.com
      sans:
      - a.foo.com
      - b.foo.com
    options:
      name: opt
      namespace: default
    secretName: supersecret
    passthrough: false</code></pre></div>
<input name="__tabs_7" type="radio" id="__tab_7_1" />
<label for="__tab_7_1">TLSOption</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: TLSOption
metadata:
  name: opt
  namespace: default

spec:
  minVersion: VersionTLS12</code></pre></div>
<input name="__tabs_7" type="radio" id="__tab_7_2" />
<label for="__tab_7_2">Secret</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: supersecret

data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0=
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0=</code></pre></div>
</div>
</details>
<h3 id="kind-tlsoption">Kind: <code>TLSOption</code><a class="headerlink" href="#kind-tlsoption" title="Permanent link">&para;</a></h3>
<p><code>TLSOption</code> is the CRD implementation of a <a href="../../../https/tls/#tls-options">Traefik "TLS Option"</a>.</p>
<p>Register the <code>TLSOption</code> kind in the Kubernetes cluster before creating <code>TLSOption</code> objects
or referencing TLS options in the <a href="#kind-ingressroute"><code>IngressRoute</code></a> / <a href="#kind-ingressroutetcp"><code>IngressRouteTCP</code></a> objects.</p>
<div class="admonition info">
<p class="admonition-title">TLSOption Attributes</p>
<div class="superfences-tabs">
<input name="__tabs_8" type="radio" id="__tab_8_0" checked="checked" />
<label for="__tab_8_0">TLSOption</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: TLSOption
metadata:
  name: mytlsoption
  namespace: default

spec:
  minVersion: VersionTLS12                      # [1]
  maxVersion: VersionTLS13                      # [1]
  curvePreferences:                             # [3]
    - CurveP521
    - CurveP384
  cipherSuites:                                 # [4]
    - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
    - TLS_RSA_WITH_AES_256_GCM_SHA384
  clientAuth:                                   # [5]
    secretNames:                                # [6]
      - secretCA1
      - secretCA2
    clientAuthType: VerifyClientCertIfGiven     # [7]
  sniStrict: true                               # [8]</code></pre></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ref</th>
<th>Attribute</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>[1]</td>
<td><code>minVersion</code></td>
<td>Defines the <a href="../../../https/tls/#minimum-tls-version">minimum TLS version</a> that is acceptable</td>
</tr>
<tr>
<td>[2]</td>
<td><code>maxVersion</code></td>
<td>Defines the <a href="../../../https/tls/#maximum-tls-version">maximum TLS version</a> that is acceptable</td>
</tr>
<tr>
<td>[3]</td>
<td><code>cipherSuites</code></td>
<td>list of supported <a href="../../../https/tls/#cipher-suites">cipher suites</a> for TLS versions up to TLS 1.2</td>
</tr>
<tr>
<td>[4]</td>
<td><code>curvePreferences</code></td>
<td>List of the <a href="../../../https/tls/#curve-preferences">elliptic curves references</a> that will be used in an ECDHE handshake, in preference order</td>
</tr>
<tr>
<td>[5]</td>
<td><code>clientAuth</code></td>
<td>determines the server's policy for TLS <a href="../../../https/tls/#client-authentication-mtls">Client Authentication</a></td>
</tr>
<tr>
<td>[6]</td>
<td><code>clientAuth.secretNames</code></td>
<td>list of names of the referenced Kubernetes <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Secrets</a> (in TLSOption namespace)</td>
</tr>
<tr>
<td>[7]</td>
<td><code>clientAuth.clientAuthType</code></td>
<td>defines the client authentication type to apply. The available values are: <code>NoClientCert</code>, <code>RequestClientCert</code>, <code>VerifyClientCertIfGiven</code> and <code>RequireAndVerifyClientCert</code></td>
</tr>
<tr>
<td>[8]</td>
<td><code>sniStrict</code></td>
<td>if <code>true</code>, Traefik won't allow connections from clients connections that do not specify a server_name extension</td>
</tr>
</tbody>
</table>
<details class="example"><summary>Declaring and referencing a TLSOption</summary><div class="superfences-tabs">
<input name="__tabs_9" type="radio" id="__tab_9_0" checked="checked" />
<label for="__tab_9_0">TLSOption</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: TLSOption
metadata:
  name: mytlsoption
  namespace: default

spec:
  minVersion: VersionTLS12
  sniStrict: true
  cipherSuites:
    - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
    - TLS_RSA_WITH_AES_256_GCM_SHA384
  clientAuth:
    secretNames:
      - secretCA1
      - secretCA2
    clientAuthType: VerifyClientCertIfGiven</code></pre></div>
<input name="__tabs_9" type="radio" id="__tab_9_1" />
<label for="__tab_9_1">IngressRoute</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: ingressroutebar

spec:
  entryPoints:
    - web
  routes:
  - match: Host(`bar.com`) &amp;&amp; PathPrefix(`/stripit`)
    kind: Rule
    services:
    - name: whoami
      port: 80
  tls:
    options: 
      name: mytlsoption
      namespace: default</code></pre></div>
<input name="__tabs_9" type="radio" id="__tab_9_2" />
<label for="__tab_9_2">Secrets</label>
<div class="superfences-content"><pre class="highlight"><code class="language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: secretCA1
  namespace: default

data:
  tls.ca: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0=

---
apiVersion: v1
kind: Secret
metadata:
  name: secretCA2
  namespace: default

data:
  tls.ca: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0=</code></pre></div>
</div>
</details>
<div class="admonition important">
<p class="admonition-title">References and namespaces</p>
<p>If the optional <code>namespace</code> attribute is not set, the configuration will be applied with the namespace of the IngressRoute.</p>
<p>Additionally, when the definition of the TLS option is from another provider,
the cross-provider syntax (<code>middlewarename@provider</code>) should be used to refer to the TLS option,
just as in the <a href="../../../middlewares/overview/#provider-namespace">middleware case</a>.
Specifying a namespace attribute in this case would not make any sense, and will be ignored.</p>
</div>
<h2 id="further">Further<a class="headerlink" href="#further" title="Permanent link">&para;</a></h2>
<p>Also see the <a href="../../../user-guides/crd-acme/">full example</a> with Let's Encrypt.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      



<!-- Application footer -->
<footer class="md-footer">

    <!-- Further information -->
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">

            <!-- Copyright and theme information -->
            <div class="md-footer-copyright">
                
                <div class="md-footer-copyright__highlight">
                    Copyright &copy; 2016-2019 Containous
                </div>
                
                powered by
                <a href="https://www.mkdocs.org" title="MkDocs">MkDocs</a>
                and
                <a href="https://squidfunk.github.io/mkdocs-material/"
                   title="Material for MkDocs">
                    Material for MkDocs</a>
            </div>

            <!-- Social links -->
            
            
            
        </div>
    </div>
</footer>


    </div>
    
      <script src="../../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../assets/js/hljs/highlight.pack.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
        <script src="../../../theme/js/structor-menu.js"></script>
      
    
  </body>
</html>